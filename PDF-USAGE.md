# PDF文档使用指南

## 功能概述
现在您的AI学习平台支持完整的PDF文档处理和智能对话功能！

## 主要功能

### 1. PDF上传和解析
- **自动文本提取**：上传PDF后自动提取文本内容
- **智能解析**：使用pdf-parse库解析PDF文档
- **页数统计**：显示PDF总页数
- **内容存储**：提取的文本保存到数据库

### 2. 文档管理
- **知识库页面**：查看、搜索、删除文档
- **公开/私有**：可设置文档为公开或私有
- **文档预览**：显示文档内容摘要

### 3. AI对话集成
- **一键使用**：点击"在对话中使用"立即加载文档
- **自动上下文**：文档内容自动作为对话上下文
- **RAG模式**：基于文档内容进行智能问答
- **多文档支持**：可同时引用多个文档

## 使用流程

### 上传PDF文档
1. 进入"知识库"页面
2. 点击"上传文档"
3. 选择PDF文件
4. 等待解析完成
5. 文档自动保存到知识库

### 使用文档对话
1. 在知识库找到需要的文档
2. 点击文档查看内容
3. 点击"在对话中使用"
4. 自动跳转到聊天页面
5. 文档内容已加载，可以开始提问

### 示例对话
- "总结一下这个文档的主要内容"
- "文档中提到了哪些关键概念？"
- "根据文档内容，解释一下..."
- "这个文档的第3章讲了什么？"

## 技术实现

### 前端
- **文件上传**：支持拖拽和点击上传
- **进度显示**：实时显示上传进度
- **Toast通知**：友好的操作反馈

### 后端
- **Vercel API**：`/api/parse-pdf` 处理PDF解析
- **Base64传输**：安全的文件传输方式
- **错误处理**：完善的错误提示

### 数据流
1. 用户上传PDF →
2. 前端转Base64 →
3. Vercel API解析 →
4. 提取文本内容 →
5. 保存到Supabase →
6. 可用于AI对话

## 注意事项

### 文件限制
- 单个文件最大50MB（Vercel限制）
- 支持标准PDF格式
- 扫描版PDF可能无法提取文本

### 性能优化
- 大文件自动分块处理
- 文本内容智能分段
- 缓存常用文档

### 安全性
- 私有文档仅自己可见
- 文档内容加密存储
- API请求身份验证

## 常见问题

### Q: PDF解析失败怎么办？
A: 检查PDF是否损坏，或尝试使用其他PDF工具转换格式

### Q: 能处理多大的PDF？
A: 目前限制为50MB，适合大部分文档

### Q: 支持哪些语言的PDF？
A: 支持所有语言，包括中文、英文等

### Q: 如何删除已上传的文档？
A: 在知识库页面点击文档旁的删除按钮

## 后续优化

- [ ] 支持更多文档格式（Word、PPT等）
- [ ] OCR功能（识别扫描版PDF）
- [ ] 文档版本管理
- [ ] 文档协作分享
- [ ] 高级搜索功能

## 部署注意

部署到Vercel后会自动启用PDF解析功能，无需额外配置。

---

🎉 现在您可以上传PDF文档，并让AI基于文档内容进行智能对话了！